# Cloudflare Environment Variables Configuration

## Required Environment Variables

Set these in Cloudflare Pages Dashboard → Settings → Environment Variables

### Production Environment

```bash
# Node.js version (auto-detected from .node-version)
NODE_VERSION=20

# Environment
NODE_ENV=production

# API Configuration
NEXT_PUBLIC_API_URL=https://api.deepfold.com

# Site URL (for SEO and redirects)
NEXT_PUBLIC_SITE_URL=https://deepfold.com

# Analytics (optional)
NEXT_PUBLIC_ANALYTICS_ID=your_cloudflare_analytics_id
```

### Preview Environment (for Pull Requests)

```bash
# Node.js version
NODE_VERSION=20

# Environment
NODE_ENV=preview

# API Configuration (point to staging/preview backend)
NEXT_PUBLIC_API_URL=https://api-preview.deepfold.com

# Site URL
NEXT_PUBLIC_SITE_URL=https://preview.deepfold.pages.dev
```

## Optional Environment Variables

```bash
# Feature Flags
NEXT_PUBLIC_ENABLE_ANALYTICS=true
NEXT_PUBLIC_ENABLE_SERVICE_WORKER=true

# Third-party integrations
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_live_xxx
NEXT_PUBLIC_GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX

# Social Media
NEXT_PUBLIC_FACEBOOK_APP_ID=your_facebook_app_id
NEXT_PUBLIC_TWITTER_HANDLE=@deepfold
```

## GitHub Secrets Configuration

For GitHub Actions deployment, add these secrets in GitHub repository settings:

```bash
# Go to: Settings → Secrets and variables → Actions → New repository secret

CLOUDFLARE_API_TOKEN=your_cloudflare_api_token
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id
NEXT_PUBLIC_API_URL=https://api.deepfold.com
```

### Getting Cloudflare Credentials

1. **API Token:**
   - Go to [Cloudflare Dashboard](https://dash.cloudflare.com/profile/api-tokens)
   - Click "Create Token"
   - Use "Edit Cloudflare Pages" template
   - Copy the token and add to GitHub secrets

2. **Account ID:**
   - Go to Cloudflare Dashboard
   - Select your domain
   - Account ID is shown in the right sidebar
   - Copy and add to GitHub secrets

## Local Development

Create `.env.local` in `/frontend` directory:

```bash
# API Backend URL
NEXT_PUBLIC_API_URL=http://localhost:5000

# Site URL
NEXT_PUBLIC_SITE_URL=http://localhost:3000

# Development flags
NEXT_PUBLIC_ENABLE_ANALYTICS=false
```

## Testing Environment Variables

Test locally before deploying:

```bash
cd frontend

# Load environment variables
export NEXT_PUBLIC_API_URL=http://localhost:5000

# Run development server
pnpm dev

# Or build for production
pnpm build
pnpm start
```
